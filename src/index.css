@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================
   Design tokens
   ========================= */
:root{
  color-scheme: dark;

  /* Neutrals */
  --bg: #0b0e13;
  --bg-elev: #0f131a;
  --text: #e8eaf2;
  --muted: #b8bfd4;
  --border: rgba(255,255,255,.08);

  /* Brand */
  --violet: #7c3aed;
  --blue:   #2563eb;
  --brand:  linear-gradient(90deg, var(--violet), var(--blue));

  /* FX */
  --shadow-1: 0 14px 40px -18px rgba(15, 18, 24, .65);
  --shadow-2: 0 20px 50px -26px rgba(65, 99, 243, .25);

  /* Radii */
  --r-sm: 10px;
  --r-md: 14px;
  --r-lg: 18px;

  /* Motion */
  --ease: cubic-bezier(.2,.7,.1,1);
}

/* =========================
   Canvas
   ========================= */
html, body {
  background: var(--bg);
  color: var(--text);
  min-height: 100%;
  max-width: 100%;
  overflow-x: hidden; /* guard against accidental horizontal scroll on mobile */
}

/* subtle grid background */
body::before{
  content:"";
  position: fixed; inset: 0; z-index:-1;
  background:
    radial-gradient(1400px 900px at 10% -10%, rgba(124,58,237,.08), transparent 55%),
    radial-gradient(1200px 800px at 95% 10%, rgba(37,99,235,.08), transparent 55%),
    linear-gradient(rgba(255,255,255,.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.04) 1px, transparent 1px);
  background-size: auto, auto, 44px 44px, 44px 44px;
  background-position: 0 0, 0 0, center, center;
  opacity: .5;
}

.container { @apply max-w-7xl mx-auto px-6; }
.container-narrow { @apply max-w-5xl; }
.full-bleed{ position:relative; left:50%; right:50%; margin-left:-50vw; margin-right:-50vw; width:100vw; }
.landing{ margin-top: -24px; }
.landing .hero{ padding-top: 40px; }
.page-wrap { @apply container py-10; }
.section   { @apply py-16; }

/* =========================
   Components
   ========================= */
.card{
  background: var(--bg-elev);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow-1);
}
.card-soft{ background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); }

/* Section title inside cards */
.card-title{
  font-size:.95rem; font-weight:700; color:#cbd3ea;
}

/* Inline link (subtle) */
.link{
  color:#cfd6ff; text-decoration:none; font-size:.85rem;
}
.link:hover{ color:#fff; text-decoration:underline; }

/* Small inline card (e.g., deadlines, frames) */
.mini-card{
  position:relative;
  padding:.75rem .9rem; border-radius:12px;
  background: rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
}
.mini-card::before{
  /* accent bar */
  content:""; position:absolute; left:-1px; top:10px; bottom:10px; width:3px;
  border-radius:999px; background: var(--accent, rgba(124,58,237,.7));
}
.mini-card .title{ font-weight:600; color:#e8eaf2; }
.mini-card .date{ font-size:.78rem; color:#9fb0d8; }
.mini-card .sub{ font-size:.78rem; color:#b8bfd4; margin-top:.15rem; }

/* Deadline tones */
.mini-card.is-today{
  --accent: #f59e0b; border-color: rgba(245,158,11,.35); background: rgba(245,158,11,.08);
}
.mini-card.is-soon{
  --accent: #60a5fa; border-color: rgba(96,165,250,.35); background: rgba(96,165,250,.08);
}
.mini-card.is-past{
  --accent: #ef4444; border-color: rgba(239,68,68,.35); background: rgba(239,68,68,.08);
}
.mini-card.is-far{
  --accent: #34d399; border-color: rgba(52,211,153,.28); background: rgba(52,211,153,.06);
}

/* Suggestions list */
.suggestion-list{ display:grid; gap:.5rem; margin-top:.25rem; list-style:none; padding:0; }
.suggestion-item, .suggestion-list > li{
  position:relative; display:flex; align-items:center; gap:.6rem;
  padding:.6rem .8rem; border-radius:12px; line-height:1.35;
  color:#e8eaf2; background: rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.10);
}
.suggestion-item::before, .suggestion-list > li::before{
  content:""; display:block; flex:none; width:.5rem; height:.5rem; border-radius:999px;
  background: linear-gradient(90deg,#7c3aed,#2563eb);
  box-shadow: 0 0 0 2px rgba(124,58,237,.20);
}
.suggestion-item::after, .suggestion-list > li::after{
  content:"›"; margin-left:auto; color:#9fb0d8; opacity:.7; transition: transform .2s var(--ease), opacity .2s linear;
}
.suggestion-item:hover::after, .suggestion-list > li:hover::after{ transform: translateX(2px); opacity:.95; }
.suggestion-empty{ color:#9fb0d8; font-size:.9rem; padding:.25rem .1rem; }

/* EC rank badges (subtle color cues) */
.badge.text-emerald-300{ color:#86efac !important; }
.badge.text-sky-300{ color:#93c5fd !important; }
.badge.text-amber-300{ color:#fcd34d !important; }
.badge.text-slate-300{ color:#cbd5e1 !important; }

/* EC list accents by rank */
.ec-item{ position: relative; user-select: none; }
.ec-item::before{
  content:""; position:absolute; left:-1px; top:10px; bottom:10px; width:3px; border-radius:999px;
  background: var(--accent, rgba(124,58,237,.7));
}
/* Tidy long titles and text */
.ec-item h3{ overflow-wrap:anywhere; }
/* Diamond / Gold / Silver tile effects */
.ec-item.rank-diamond{
  --accent:#67e8f9; /* cyan-300 */
  background:
    linear-gradient(180deg, rgba(103,232,249,.07), rgba(103,232,249,.02)),
    var(--bg-elev);
  border-color: rgba(103,232,249,.26);
  box-shadow: 0 12px 28px -18px rgba(103,232,249,.35);
}
.ec-item.rank-gold{
  --accent:#facc15;
  background:
    linear-gradient(180deg, rgba(250, 204, 21, .06), rgba(250,204,21,.02)),
    var(--bg-elev);
  border-color: rgba(250,204,21,.22);
  box-shadow: 0 12px 28px -18px rgba(250,204,21,.35);
}
.ec-item.rank-silver{
  --accent:#cbd5e1;
  background:
    linear-gradient(180deg, rgba(203,213,225,.06), rgba(203,213,225,.02)),
    var(--bg-elev);
  border-color: rgba(203,213,225,.22);
  box-shadow: 0 12px 28px -18px rgba(203,213,225,.30);
}

/* Drag affordance */
.drag-handle{
  display:inline-block; width:18px; height:18px; margin-right:.25rem; border-radius:6px; cursor:grab;
  color:#8fa4d6;
  border:1px solid rgba(255,255,255,.12);
}
.drag-handle:active{ cursor:grabbing; }
.ec-item.is-dragging{ opacity:.85; transform: scale(.997); }

/* Save indicator pulse */
.save-dot{
  display:inline-block; width:10px; height:10px; border-radius:999px;
  background:#34d399; box-shadow: 0 0 0 4px rgba(52, 211, 153, .24);
}
@keyframes savePulse{
  0%   { box-shadow: 0 0 0 0 rgba(52,211,153,.28); transform: scale(.96); }
  60%  { box-shadow: 0 0 0 9px rgba(52,211,153,0); transform: scale(1); }
  100% { box-shadow: 0 0 0 0 rgba(52,211,153,0); transform: scale(1); }
}
.save-dot.pulse{ animation: savePulse 1.2s ease-out 1; }

/* Gradient text utility for hero highlights */
.text-gradient{
  background: var(--brand);
  -webkit-background-clip: text; background-clip: text;
  -webkit-text-fill-color: transparent; color: transparent;
}

.badge{
  display: inline-flex; align-items: center; gap:.5rem;
  padding: .35rem .6rem; font-size: .75rem; line-height: 1;
  border-radius: 9999px; border:1px solid var(--border);
  background: rgba(255,255,255,.04); color: #dbe0ff;
}

/* Green badge variant with glowing orb */
.badge.badge-green{
  position: relative;
  padding-left: 1.6rem; /* more space for orb */
  color: #86efac; /* emerald-300 */
  background: rgba(16,185,129,.10); /* emerald-500 at 10% */
  border-color: rgba(16,185,129,.35);
}
.badge.badge-green::before{
  content:""; position:absolute; left:.5rem; width:8px; height:8px; border-radius:999px;
  background:#22c55e; /* emerald-500 */
  box-shadow: 0 0 0 6px rgba(34,197,94,.18), 0 0 16px 4px rgba(34,197,94,.28);
  animation: orbPulse 2.8s var(--ease) infinite;
}

.hr-fade{
  height:1px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.08), transparent);
}

/* Buttons */
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
  padding:.7rem 1rem; font-weight:800; letter-spacing:.1px;
  border-radius: var(--r-md); position:relative; isolation:isolate;
  border:1px solid transparent; outline: none;
  transition: transform .08s ease, box-shadow .25s var(--ease), background-position .35s var(--ease), opacity .2s linear;
}
.btn:active{ transform: translateY(1px) scale(.99); }
.btn:focus-visible{ box-shadow: 0 0 0 2px rgba(124,58,237,.45), 0 0 0 5px rgba(124,58,237,.18); }
.btn:disabled{ opacity:.7; cursor:not-allowed; }

/* Solid gradient button */
.btn-primary{
  color:#fff;
  background: linear-gradient(92deg, #7c3aed, #2563eb 55%, #7c3aed);
  background-size: 200% 100%;
  border-color: rgba(255,255,255,.10);
  box-shadow: 0 18px 40px -20px rgba(99,102,241,.55), 0 6px 14px -8px rgba(37,99,235,.35);
}
.btn-primary::before{
  /* soft top highlight */
  content:""; position:absolute; inset:0; border-radius: inherit; pointer-events:none;
  background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,0) 42%);
  mix-blend: screen; opacity:.7;
}
.btn-primary:hover{
  background-position: 100% 0;
  box-shadow: 0 22px 54px -22px rgba(99,102,241,.7), 0 10px 22px -12px rgba(37,99,235,.45);
}

/* College logos row */
.logo-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap:18px; align-items:center; }
.logo-grid img{ height:28px; max-width:140px; width:auto; object-fit:contain; opacity:.98; filter:none; transition: opacity .2s ease, transform .2s var(--ease); margin-inline:auto; }
.logo-grid img:hover{ opacity:1; transform: translateY(-1px); }

/* Muted solid (secondary) */
.btn-secondary{
  color:#e8eaf2;
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
  border-color: rgba(255,255,255,.14);
}
.btn-secondary:hover{ background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06)); color:#fff; }

/* Outline variant */
.btn-outline{
  display:inline-flex; align-items:center; justify-content:center; gap:.4rem;
  padding:.6rem 1rem; font-weight:800; border-radius: var(--r-md);
  color:#dbe0ff; border:1px solid rgba(255,255,255,.16); background: rgba(255,255,255,.04);
}
.btn-outline:hover{ background: rgba(255,255,255,.07); border-color: rgba(255,255,255,.22); }

/* Inputs */
.input{
  @apply w-full rounded-xl px-3 py-2 focus:outline-none focus:ring-2;
  background: rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.14);
  color:#f3f4f6;
}
.input::placeholder{ color:#96a0ba; }
.input-group{ position:relative; }
.input-with-icon{ padding-left: 2.25rem; }
.input-icon{
  position:absolute; left:.6rem; top:50%; transform:translateY(-50%);
  width:22px; height:22px; color:#9fb0d8; display:grid; place-items:center; pointer-events:none;
}
.input-invalid{
  border-color: rgba(255,99,99,.5) !important;
  box-shadow: 0 0 0 2px rgba(255,99,99,.08);
}

/* =========================
   Hero
   ========================= */
.hero{ position: relative; padding: 48px 0 28px; }
.hero h1{
  font-weight:800; letter-spacing:-0.02em;
  font-size: clamp(2.3rem, 4.2vw + 1rem, 3.8rem);
}
.kicker { color:#cbd5ff; font-weight:600; font-size:.9rem; }

/* Schools ticker */
.ticker{
  position: relative; overflow: hidden;
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  background: rgba(255,255,255,.03);
}
.ticker-inner{
  display:flex; gap: 3rem; white-space: nowrap; padding: .7rem 1.2rem;
  animation: ticker-scroll 10s linear infinite;
}
.ticker-item{ display:inline-flex; align-items:center; gap:.8rem; color:#e8edff; opacity:.95; font-weight:600; line-height:1; }
.ticker-item span{ display:inline-block; line-height:20px; letter-spacing:.1px; }
.ticker-item img{ display:block; height:20px; width:20px; object-fit:contain; filter: none; opacity:.98; }
.ticker-fade{
  pointer-events:none; position:absolute; inset:0;
  background: linear-gradient(90deg, var(--bg) 0%, transparent 12%, transparent 88%, var(--bg) 100%);
}
@keyframes ticker-scroll{ from{transform:translateX(0)} to{transform:translateX(-50%)} }

/* Section headings */
.h2{
  font-size: clamp(1.4rem, 1.5vw + .9rem, 1.9rem);
  font-weight: 700; color:#fff; position: relative;
}
.h2::after{
  content:""; position:absolute; left:0; bottom:-10px; height:3px; width:96px;
  background: var(--brand); border-radius:999px; opacity:.9;
}

/* Metric */
.metric{
  text-align:center; padding: 1.1rem; border-radius: var(--r-md);
  border:1px solid var(--border); background: rgba(255,255,255,.03);
}
.metric b{ font-size: 1.8rem; font-weight:800; color:#fff; }
.metric span{ display:block; color:#aeb6d0; font-size:.78rem; margin-top:.25rem; }

/* Feature list */
.feature{ display:flex; align-items:flex-start; gap:.9rem; }
.icon{
  width:36px; height:36px; display:grid; place-items:center;
  border-radius: 10px; background: rgba(124,58,237,.15);
  border:1px solid rgba(124,58,237,.35);
}

/* Testimonials */
.quote{ font-size:.95rem; color:#e8eaf2; }
.quote small{ color:#9aa3be; }

/* Animated gradient border for colorful, non-blurry effect */
.anim-beam{ position: relative; }
.anim-beam::before{
  content:""; position:absolute; inset:-1px; border-radius: inherit; padding: 2px;
  background: conic-gradient(from 0deg, #7c3aed, #22d3ee, #34d399, #f59e0b, #7c3aed);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  animation: beamSpin 6s linear infinite;
}
@keyframes beamSpin{ to{ transform: rotate(360deg); } }

/* =========================
   Media Gallery
   ========================= */
.media-grid{ position:relative; display:grid; grid-template-columns: 1fr; gap: 1rem; overflow: hidden; }
@media (min-width: 1024px){ .media-grid{ grid-template-columns: repeat(3, 1fr); gap: 1.1rem; } }
.media-grid::before,
.media-grid::after{
  content:""; position:absolute; pointer-events:none; border-radius:9999px; filter: blur(28px);
}
.media-grid::before{ width: 360px; height: 360px; left:-120px; top:-60px; background: radial-gradient(circle, rgba(124,58,237,.22), transparent 60%); }
.media-grid::after{ width: 420px; height: 420px; right:-140px; bottom:-80px; background: radial-gradient(circle, rgba(37,99,235,.20), transparent 60%); }
.media-img{ display:block; width:100%; height:auto; object-fit:cover; object-position: center 40%; max-height: 320px; border-radius: 14px; border:1px solid var(--border); box-shadow: var(--shadow-2); }
.media-grid .card:has(> img.media-img){ display:none; }
.shine{ animation: imgFloat 7s var(--ease) infinite; }
@keyframes imgFloat{ 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-6px) } }
/* Inline highlight (match editor tones) */
.hl{ position:relative; border-radius:4px; padding: 0 .06em; }
.hl:not(.hl-good):not(.hl-meh){ background: rgba(124,58,237,.20); outline: 1px solid rgba(124,58,237,.35); }
.hl.hl-good{ background: rgba(52, 211, 153, .22); outline: 1px solid rgba(52,211,153,.35); }
.hl.hl-meh{  background: rgba(250, 204, 21, .22);  outline: 1px solid rgba(250,204,21,.35); }
@keyframes hlPulse{ 0%,100%{ background-position: 0% 50%; } 50%{ background-position: 100% 50%; } }

/* =========================
   Animations
   ========================= */
.reveal{
  opacity:0; transform: translateY(10px) scale(.99);
  transition: opacity .6s var(--ease), transform .6s var(--ease);
}
.reveal.in{ opacity:1; transform: translateY(0) scale(1); }

/* =========================
   Header (compact)
   ========================= */
.navbar{
  @apply backdrop-blur-md;
  background: rgba(15,18,24,.66);
  border-bottom: 1px solid var(--border);
}
.nav-link{
  position:relative; text-decoration:none;
  color: rgba(232,234,242,.86);
  transition: color .2s ease, background-size .25s var(--ease);
}
.nav-link:hover{ color:#fff; }
.nav-link.active{ color:#fff; }
.nav-link.active::after, .nav-link:hover::after{
  content:""; position:absolute; left:0; right:0; bottom:-6px; height:2px;
  background: var(--brand); border-radius:999px; opacity:.9;
}
.nav-signin{
  display:inline-flex; align-items:center; justify-content:center; gap:.4rem;
  padding:.55rem .9rem; font-weight:700; border-radius: 9999px;
  color:#dbe0ff; border:1px solid rgba(124,58,237,.55); background: transparent;
  transition: background .2s ease, color .2s ease, border-color .2s ease;
}
.nav-signin:hover{ background: rgba(124,58,237,.12); color:#fff; border-color: rgba(124,58,237,.75); }
.nav-cta{
  display:inline-flex; align-items:center; justify-content:center; gap:.45rem;
  padding:.6rem 1rem; font-weight:800; border-radius: var(--r-md); color:#fff;
  background: linear-gradient(92deg, #7c3aed, #2563eb 55%, #7c3aed);
  background-size:200% 100%;
  border:1px solid rgba(255,255,255,.10);
  box-shadow: 0 18px 40px -20px rgba(99,102,241,.55), 0 6px 14px -8px rgba(37,99,235,.35);
  transition: box-shadow .25s var(--ease), transform .08s ease, background-position .35s var(--ease);
}
.nav-cta:hover{ background-position: 100% 0; box-shadow: 0 22px 54px -22px rgba(99,102,241,.7), 0 10px 22px -12px rgba(37,99,235,.45); }
.nav-cta:active{ transform: translateY(1px) scale(.99); }

/* Mobile: slim header buttons */
@media (max-width: 480px){
  .navbar .container{ padding-left: 12px; padding-right: 12px; }
  .navbar .container > .flex{ gap:.45rem; }
  .nav-signin{ padding:.38rem .55rem; font-size:.85rem; }
  .nav-cta{ padding:.45rem .7rem; font-size:.88rem; font-weight:700; border-radius: 12px; }
}

/* Optional: match your existing .glass header wrapper */
.glass{ @apply backdrop-blur-md; background: rgba(15,18,24,.66); }
.gradient-border::after{
  content:""; position:absolute; left:0; right:0; bottom:-1px; height:1px;
  background: linear-gradient(90deg, transparent, rgba(124,58,237,.5), rgba(37,99,235,.5), transparent);
  pointer-events:none;
}

/* =========================
   Auth Layout
   ========================= */
.auth-wrap{
  min-height: calc(100vh - 72px);
  display:grid; place-items:center; padding: 48px 16px;
}
.auth-panel{ width: 100%; max-width: 460px; padding: 28px; border-radius: var(--r-lg); }

.form-label{ display:block; font-size:.85rem; color:#cbd3ea; margin-bottom:.35rem; }
.form-link{ color:#cfd6ff; text-decoration:none; font-size:.85rem; }
.form-link:hover{ color:#fff; text-decoration:underline; }
.form-error{ margin-top:.35rem; font-size:.8rem; color:#f8b4b4; }

.pw-toggle{
  position:absolute; right:.5rem; top:50%; transform:translateY(-50%);
  width:32px; height:32px; display:grid; place-items:center;
  border-radius:8px; color:#9fb0d8; background: transparent; border: 1px solid transparent;
}
.pw-toggle:hover{ background: rgba(255,255,255,.06); color:#dce6ff; border-color: var(--border); }

/* Divider */
.divider{
  position: relative; height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.08), transparent);
}
.divider::before{
  content:"or continue with";
  position:absolute; inset:0; margin:auto; width:max-content;
  padding: 0 .6rem; font-size:.75rem; color:#9aa3be; background: var(--bg);
  transform: translateY(-50%); top:50%;
}

/* OAuth */
.oauth-btn{
  width:100%;
  display:inline-flex; align-items:center; justify-content:center; gap:.55rem;
  padding:.65rem 1rem; font-weight:700; border-radius: var(--r-md);
  color:#e8eaf2; background: rgba(255,255,255,.04);
  border: 1px solid var(--border);
  transition: background .2s ease, border-color .2s ease, box-shadow .25s var(--ease);
}
.oauth-btn:hover{ background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.14); }
.oauth-icon{ width:18px; height:18px; display:grid; place-items:center; }

/* Spinner */
.spinner{
  width: 14px; height: 14px; border-radius: 999px;
  border: 2px solid rgba(255,255,255,.35);
  border-top-color: #fff; animation: spin 0.8s linear infinite;
}
@keyframes spin{ to{ transform: rotate(360deg); } }

.auth-foot{ text-align:center; }

/* Password Strength */
.pw-meter{ display:grid; grid-template-columns: repeat(4, 1fr); gap: 6px; }
.pw-seg{ height: 6px; border-radius: 999px; background: rgba(255,255,255,.07); border: 1px solid rgba(255,255,255,.10); }
.pw-seg.on{ border-color: transparent; }
.pw-seg.s-1.on{ background:#f87171; }
.pw-seg.s-2.on{ background:#fbbf24; }
.pw-seg.s-3.on{ background:#60a5fa; }
.pw-seg.s-4.on{ background:#34d399; }
.pw-check{ margin-left: .25rem; display:grid; gap: .25rem; font-size:.8rem; color:#9fb0d8; }
.pw-check li{ position: relative; padding-left: 1.2rem; }
.pw-check li::before{
  content:""; position:absolute; left:0; top:.2rem; width:.8rem; height:.8rem; border-radius:999px;
  border:1px solid var(--border); background: rgba(255,255,255,.04);
}
.pw-check li.ok{ color:#cfead9; }
.pw-check li.ok::before{
  background:#34d399; border-color:#34d399;
  mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path fill="white" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>') center/12px 12px no-repeat;
}
.pw-check li.no{ color:#a9b5d5; }

/* =========================
   In-app layout (sidenav + content)
   ========================= */
.app-frame{
  display: grid;
  grid-template-columns: 260px minmax(0,1fr);
  gap: 1rem;
  align-items: start;
  padding: 1rem 0; /* small breathing room below header */
}
.app-main{
  min-width: 0;
  position: relative;
  z-index: 0;
}

/* Sidenav (bounded, not overlaying) */
.sidenav{
  width: 100%;
  max-width: 260px;
  position: sticky;
  top: 80px; /* match header height (h-20) */
  height: calc(68vh); /* slightly smaller */
  overflow: hidden;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: var(--bg-elev);
  box-shadow: var(--shadow-1);
  z-index: 0;         /* do not float above main */
  isolation: isolate; /* keep inner z-indexes contained */
}
.sidenav-scroller{ height:100%; overflow:auto; padding:.6rem; }
.sidenav-title{
  font-weight:700; letter-spacing:.01em; color:#fff; font-size:.95rem;
  padding:.6rem .75rem .4rem;
}
.sidenav-list{ display:flex; flex-direction:column; gap:.25rem; margin-top:.25rem; }
.sidenav-link{
  display:flex; align-items:center; gap:.6rem;
  padding:.55rem .65rem; border-radius:10px; color:#cfd6ff;
  border:1px solid transparent; transition: background .2s ease, color .2s ease, border-color .2s ease;
}
.sidenav-link:hover{ background: rgba(255,255,255,.04); color:#fff; }
.sidenav-link.active{
  color:#fff; background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
  border-color: rgba(255,255,255,.08); position: relative;
}
.sidenav-link.active::before{
  content:"";
  position:absolute;
  left: 6px;  /* keep the accent INSIDE the border */
  top: 8px; bottom: 8px; width: 3px;
  background: var(--brand);
  border-radius: 999px;
  filter: drop-shadow(0 0 6px rgba(99,102,241,.35));
}
.sidenav-icon{ opacity:.9; }

/* Responsive: collapse sidenav on narrow screens */
@media (max-width: 1024px){
  .app-frame{ grid-template-columns: 1fr; }
  .sidenav{ display: none; }
}

/* =========================
   Dashboard helpers
   ========================= */
.page-title{ font-weight:800; font-size: clamp(1.4rem, 1.6vw + .8rem, 2rem); color:#fff; letter-spacing:-.01em; }
.subtle{ color:#aeb6d0; }
.kicker-sm{ color:#cbd5ff; font-weight:600; font-size:.8rem; letter-spacing:.04em; }

.card-header{
  padding: .9rem 1rem; border-bottom:1px solid var(--border);
  display:flex; align-items:center; justify-content:space-between;
}
.card-body{ padding: 1rem; }

.dash-grid{ display:grid; gap:1rem; grid-template-columns: 1fr; }
@media (min-width: 960px){ .dash-grid{ grid-template-columns: 1.1fr .9fr; } }

/* Gauge */
.gauge-wrap{ position:relative; width:240px; height:140px; }
.gauge-label{ position:absolute; inset:0; display:grid; place-items:center; background:transparent!important; }
.gauge-num{ font-size:2.2rem; font-weight:800; color:#fff; line-height:1; background:transparent!important; }
.gauge-denom{ font-size:.7rem; color:#8ea0c9; margin-left:.25rem; translate:0 -2px; background:transparent!important; }
.inline-score{ display:inline-flex; align-items:flex-end; }
/* ===== Marketing Header ===== */
.m-header{ backdrop-filter: blur(10px); background: rgba(15,18,24,.66); border-bottom: 1px solid var(--border); }
.m-header-line{ height:1px; background: linear-gradient(90deg,transparent,rgba(124,58,237,.45),transparent); }

.m-link{
  position: relative; color: rgba(232,234,242,.86); text-decoration: none;
  transition: color .2s ease, background-size .25s var(--ease);
}
.m-link:hover, .m-link.is-active{ color:#fff; }
.m-link.is-active::after, .m-link:hover::after{
  content:""; position:absolute; left:0; right:0; bottom:-6px; height:2px;
  background: var(--brand); border-radius:999px; opacity:.9;
}

.m-signin{
  display:inline-flex; align-items:center; justify-content:center; gap:.4rem;
  padding:.55rem .9rem; font-weight:700; border-radius: 9999px;
  color:#dbe0ff; border:1px solid rgba(124,58,237,.55); background: transparent;
  transition: background .2s ease, color .2s ease, border-color .2s ease;
}
.m-signin:hover{ background: rgba(124,58,237,.12); color:#fff; border-color: rgba(124,58,237,.75); }

.m-cta{
  display:inline-flex; align-items:center; justify-content:center; gap:.45rem;
  padding:.6rem 1rem; font-weight:800; border-radius: 9999px; color:#fff;
  background: var(--brand); box-shadow: var(--shadow-2);
  transition: box-shadow .25s var(--ease), transform .08s ease;
}
.m-cta:active{ transform: translateY(1px) scale(.99); }

.m-menu{
  width:40px; height:40px; display:grid; place-items:center;
  border-radius:12px; border:1px solid var(--border); background: rgba(255,255,255,.06);
  color:#fff;
}
.m-menu:hover{ background: rgba(255,255,255,.08); }

.m-sheet{
  background: var(--bg-elev); border:1px solid var(--border); border-radius: 16px; box-shadow: var(--shadow-1);
  padding: .5rem;
}
.m-sheet-link{
  display:block; padding:.6rem .75rem; border-radius:10px; color:#e8eaf2; text-decoration:none;
}
.m-sheet-link:hover{ background: rgba(255,255,255,.05); }

/* ===== Essays page tidy ===== */

/* two-column editor grid */
.editor-grid{ display:grid; gap:1rem; grid-template-columns: 1.2fr .8fr; }
@media (max-width: 1024px){ .editor-grid{ grid-template-columns: 1fr; } }

.editor-card{ background: var(--bg-elev); border:1px solid var(--border); border-radius: 16px; }
.editor-card .header{ padding:.8rem 1rem; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
.editor-card .body{ padding: 1rem; }

.editor-toolbar{ display:flex; align-items:center; gap:.6rem; flex-wrap:wrap; }
.chip{ padding:.35rem .6rem; border-radius:999px; font-size:.75rem; color:#cfd6ff; border:1px solid var(--border); background: rgba(255,255,255,.04); }
.btn-ghost{ padding:.55rem .85rem; border-radius:12px; border:1px solid var(--border); background: rgba(255,255,255,.04); color:#e8eaf2; font-weight:700; }
.btn-ghost:hover{ background: rgba(255,255,255,.06); }

/* editor textarea */
.editor-text{
  width:100%; min-height: 340px; resize: vertical;
  padding: .9rem 1rem; border-radius: 12px;
  background: rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.14);
  color:#e8eaf2;
}

/* small panels (What’s working / What needs work) */
.kpanel{ border:1px solid var(--border); border-radius: 14px; background: rgba(255,255,255,.03); padding: .9rem; }
.kpanel h4{ font-size:.9rem; color:#dbe0ff; margin-bottom:.35rem; }

/* sentence list */
.sent-list{ display:grid; gap:.5rem; }
.sent-item{
  padding:.55rem .7rem; border-radius:10px;
  background: rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.10);
  color:#cfe2ff;
}
.sent-item.muted{ color:#9fb0d8; }

/* right rail score tile */
.score-card .title{ font-size:.95rem; color:#cbd3ea; }
.score-card .value{
  display:flex; align-items: baseline; gap:.35rem; margin-top:.25rem;
}
.score-card .value .num{ font-size:2.2rem; font-weight:800; color:#fff; line-height:1; }
.score-card .value .den{ font-size:.75rem; color:#8ea0c9; }

/* keep your existing gauge helpers if you use Gauge */
.inline-score{ display:inline-flex; align-items:flex-end; }
/* =========================
   SideNav offset (uniform)
   ========================= */
.sidenav{
  /* consistent with header height */
  top: 80px;
  height: calc(68vh);
}

/* =========================
   Essays page (v2)
   ========================= */
.essay-page{ display:block; }
.essay-layout{
  display:grid;
  grid-template-columns: minmax(0,1.25fr) minmax(300px,.75fr);
  gap: 1.25rem;
}
@media (max-width:1100px){ .essay-layout{ grid-template-columns: 1fr; } }
.rail-sticky{ position: sticky; top: 16px; }

/* Cards */
.editor-card{
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  border:1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow-1);
}
.editor-card .header{
  padding:.8rem 1rem; border-bottom:1px solid var(--border);
  display:flex; align-items:center; justify-content:space-between; gap:.75rem; flex-wrap:wrap;
}
.editor-card .body{ padding: 1rem; }

/* Toolbar + chips */
.toolbar{ display:flex; align-items:center; gap:.6rem; flex-wrap:wrap; }
.chip{
  padding:.35rem .6rem; border-radius:999px; font-size:.75rem;
  color:#cfd6ff; border:1px solid var(--border); background: rgba(255,255,255,.04);
}
.badge-ok{ color:#8FE3A1; }
.badge-dim{ color:#9fb0d8; }

/* Primary action (top right) */
.btn-primary-sm{
  display:inline-flex; align-items:center; gap:.45rem; padding:.55rem .85rem;
  font-weight:800; border-radius:12px; color:#fff;
  background: linear-gradient(92deg, #7c3aed, #2563eb 55%, #7c3aed);
  background-size:200% 100%;
  border:1px solid rgba(255,255,255,.10);
  box-shadow: 0 14px 30px -18px rgba(99,102,241,.55), 0 6px 14px -10px rgba(37,99,235,.35);
  transition: background-position .35s var(--ease), box-shadow .25s var(--ease);
}
.btn-primary-sm:hover{ background-position: 100% 0; box-shadow: 0 18px 40px -18px rgba(99,102,241,.65), 0 10px 22px -12px rgba(37,99,235,.45); }
.btn-primary-sm:active{ transform: translateY(1px) scale(.99); }

/* Editor textarea */
.editor-text{
  width:100%; min-height: 360px; resize: vertical;
  padding: .95rem 1rem; border-radius: 12px; line-height:1.6;
  background: rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.14);
  color:#e8eaf2;
}
.editor-text::placeholder{ color:#96a0ba; }
.meta-bar{
  display:flex; align-items:center; gap:.8rem; flex-wrap:wrap;
  margin-top:.6rem; font-size:.8rem; color:#9fb0d8;
}

/* Panels (what’s working / needs work) */
.panel-grid{ display:grid; gap:1rem; grid-template-columns: 1fr 1fr; }
@media (max-width:900px){ .panel-grid{ grid-template-columns: 1fr; } }
.kpanel{
  border:1px solid var(--border); border-radius: 14px; background: rgba(255,255,255,.03); padding: .9rem;
}
.kpanel h4{ font-size:.92rem; color:#dbe0ff; margin-bottom:.35rem; }
.kpanel p{ font-size:.9rem; color:#9fb0d8; }

/* Sentence view */
.sent-card .header{ padding:.7rem 1rem; border-bottom:1px solid var(--border); color:#cbd3ea; }
.sent-list{ display:grid; gap:.5rem; padding: 1rem; }
.sent-item{
  padding:.55rem .7rem; border-radius:10px; color:#cfe2ff;
  background: rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
}
.sent-item.muted{ color:#9fb0d8; }
.sent-item.good{ border-color: rgba(34,197,94,.35); background: rgba(34,197,94,.08); }
.sent-item.warn{ border-color: rgba(234,179,8,.35); background: rgba(234,179,8,.08); }

/* Right rail */
.rail-card .title{ font-size:.95rem; color:#cbd3ea; }
.rail-card .body{ padding: 1rem; }

/* Score slab */
.score-slab{
  display:flex; align-items:baseline; gap:.4rem;
  padding:.75rem .9rem; border-radius:12px;
  background: rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.10);
  width: max-content;
}
.score-slab .num{ font-size:2.4rem; font-weight:800; line-height:1; color:#fff; }
.score-slab .den{ font-size:.8rem; color:#8ea0c9; }

/* Simple meter (no JS) — set via style="--score:85" */
.score-meter{
  height: 8px; width:100%; border-radius:999px; overflow:hidden;
  background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.10);
  position: relative; margin-top:.6rem;
}
.score-meter::after{
  content:""; position:absolute; inset:0; width: calc(var(--score,0) * 1%); border-radius:999px;
  background: linear-gradient(90deg, #34d399, #60a5fa);
}

/* Right-rail buttons */
.btn-ghost{
  padding:.6rem .9rem; border-radius:12px; border:1px solid var(--border);
  background: rgba(255,255,255,.04); color:#e8eaf2; font-weight:700; width:100%;
}
.btn-ghost:hover{ background: rgba(255,255,255,.06); }

/* ==== Essay Workspace — refined (v4) ==== */

.essay-ws .editor-wrap{
  display: grid;
  /* wider editor area + compact rail */
  grid-template-columns: minmax(0, 1.9fr) minmax(320px, .8fr);
  grid-template-areas:
    "top  top"
    "left right";
  gap: 1.25rem;
}
@media (max-width: 1200px){
  .essay-ws .editor-wrap{
    grid-template-columns: 1fr;
    grid-template-areas:
      "top"
      "left"
      "right";
  }
}

/* Areas */
.essay-ws .editor-top   { grid-area: top; }
.essay-ws .editor-left  { grid-area: left; }
.essay-ws .editor-right { grid-area: right; position: sticky; top: 16px; align-self: start; }

/* Sleek top bar */
.essay-ws .editor-topbar{
  display:flex; align-items:center; gap:.8rem; flex-wrap:wrap;
  padding:.9rem 1rem; border-radius:16px;
  background: var(--bg-elev);
  border:1px solid var(--border);
  box-shadow: var(--shadow-1);
  position: relative;
}
.essay-ws .editor-topbar::after{
  content:""; position:absolute; left:10px; right:10px; bottom:-1px; height:1px;
  background: linear-gradient(90deg,transparent, rgba(124,58,237,.5), rgba(37,99,235,.5), transparent);
}
.essay-ws .editor-topbar .grow{ flex:1 1 auto; min-width: 260px; }

/* Actions: single line, no wrap; scroll if overflow */
.essay-ws .editor-actions{
  display:flex; gap:.6rem; align-items:center;
  margin-left:auto; white-space:nowrap; flex-wrap:nowrap; overflow-x:auto;
}
.essay-ws .editor-actions .btn{ white-space:nowrap; }

/* Two-up prompt/meta row under the top bar */
.essay-ws .editor-meta{
  display:grid; gap:1rem; grid-template-columns: 1fr 1fr;
}
@media (max-width: 1200px){ .essay-ws .editor-meta{ grid-template-columns: 1fr; } }

/* Editor textarea — more room, better legibility */
.essay-ws .editor-text{
  width:100%;
  min-height: var(--editor-h, 740px);
  padding: 1rem 1.1rem;
  border-radius: 14px;
  background: rgba(255,255,255,.045);
  border: 1px solid rgba(255,255,255,.12);
  color:#e8eaf2;
  line-height: 1.9;
  font-size: 1.08rem;
}
.essay-ws .editor-text.big      { --editor-h: 780px; font-size: 1.1rem; line-height: 1.95; }
.essay-ws .editor-text.compact  { --editor-h: 560px; font-size: 1.0rem; line-height: 1.7; }

/* Under-editor meta */
.essay-ws .meta-mini{
  display:flex; gap:.9rem; flex-wrap:wrap;
  margin-top:.65rem; font-size:.82rem; color:#9fb0d8;
}

/* Soft badges (always single line) */
.essay-ws .badge-soft{
  display:inline-flex; align-items:center; gap:.45rem;
  padding:.38rem .65rem; border-radius:999px;
  border:1px solid var(--border); background: rgba(255,255,255,.04); color:#dbe0ff;
  white-space:nowrap;
}

/* Modern dropdowns — apply to both .select and select.input */
.essay-ws .select,
.essay-ws select.input{
  -webkit-appearance: none; -moz-appearance: none; appearance: none;
  background: rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.14);
  color:#f3f4f6; border-radius: 12px;
  padding: .55rem 2.1rem .55rem .8rem;  /* space for arrow */
  line-height: 1; font-weight: 600;
  min-height: 38px;
  background-image:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24'><path fill='%23cbd3ea' d='M7 10l5 5 5-5z'/></svg>");
  background-repeat: no-repeat;
  background-position: right .6rem center;
  background-size: 18px 18px;
}
.essay-ws .select:focus,
.essay-ws select.input:focus{
  outline: none; box-shadow: 0 0 0 2px rgba(124,58,237,.25);
}
.essay-ws .select option,
.essay-ws select.input option{
  color: #0b0e13;               /* system menu text contrast */
}
.essay-ws .select--sm{ width: 240px; max-width: 42vw; text-overflow: ellipsis; }

/* Score card */
.essay-ws .score-card{
  padding: 1rem; border-radius:16px;
  background: var(--bg-elev); border:1px solid var(--border);
  box-shadow: var(--shadow-1);
}
.essay-ws .score-row{ display:flex; align-items:baseline; gap:.45rem; }
.essay-ws .score-num{ font-size: 2.9rem; font-weight: 800; color:#fff; line-height:1; }
.essay-ws .score-den{ color:#8ea0c9; font-size:.8rem; translate:0 -2px; }
.essay-ws .score-bar{
  height: 8px; border-radius:999px; overflow:hidden; margin-top:.6rem;
  background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.10);
  position: relative;
}
.essay-ws .score-bar::after{
  content:""; position:absolute; inset:0; width: var(--score, 0%);
  background: linear-gradient(90deg, #34d399, #60a5fa);
  border-radius: 999px;
  transition: width .9s var(--ease);
}
/* Category variant: a bit thinner */
.essay-ws .score-bar.cat{ height:6px; }
.essay-ws .score-bar.cat::after{ width: var(--score, 0%); }

/* “Score details” disclosure */
.essay-ws .disclosure{ margin-top:.7rem; }
.essay-ws .disclosure summary{
  list-style:none; cursor:pointer; user-select:none;
  padding:.55rem .8rem; border-radius:12px;
  color:#cbd3ea; font-weight:700;
  background: rgba(255,255,255,.04); border:1px solid var(--border);
}
.essay-ws .disclosure[open] summary{ background: rgba(255,255,255,.06); }
.essay-ws .disclosure summary::-webkit-details-marker{ display:none; }
.essay-ws .disclosure .panel{ padding:.8rem .95rem; font-size:.9rem; color:#cfe2ff; }
/* Prevent glow clipping in the top bar & actions */
.essay-ws .editor-topbar,
.essay-ws .editor-actions { overflow: visible; }

/* Save indicator padding so the green orb glow never hits the edge */
.essay-ws .save-indicator { padding: 2px 6px; border-radius: 9999px; }
/* Keep green orb glow visible & actions perfectly centered */
.essay-ws .editor-topbar,
.essay-ws .editor-actions { overflow: visible; }
.essay-ws .save-indicator { padding: 2px 6px; border-radius: 9999px; }

/* Score bar confetti */
.score-card{ overflow: visible; }
.score-bar-wrap{ position: relative; overflow: visible; }
.score-bar-wrap .confetti{ position:absolute; left:0; right:0; top:-8px; height:100px; pointer-events:none; overflow:visible; }
.score-bar-wrap .confetti .piece{
  position:absolute; top:0; width:7px; height:11px; border-radius:2px;
  background: hsl(var(--hue, 240), 85%, 62%);
  transform: translateY(0) rotate(var(--rot, 0deg));
  animation: confetti-fall 1.2s ease-out var(--delay, 0s) both;
  box-shadow: 0 2px 6px rgba(0,0,0,.25);
}
@keyframes confetti-fall{
  to { transform: translateY(92px) rotate(360deg); opacity: .25; }
}

/* Hide marketing nav when on the EssayWorkspace page; keep header chrome only */
body:has(.essay-ws) .navbar .nav-link,
body:has(.essay-ws) .navbar .nav-cta,
body:has(.essay-ws) .navbar .nav-signin,
body:has(.essay-ws) .m-header .m-link,
body:has(.essay-ws) .m-header .m-cta,
body:has(.essay-ws) .m-header .m-signin { display: none !important; }

/* =========================
   Global Dropdowns (Dark / Notion-ish)
   ========================= */

/* 1) Native <select> look — dark, branded, no blue/white */
.select,
select.select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background: rgba(255,255,255,.05);
  border: 1px solid rgba(255,255,255,.14);
  color: #f3f4f6;
  border-radius: 12px;
  padding: .58rem 2.1rem .58rem .8rem; /* room for arrow */
  line-height: 1;
  font-weight: 600;
  min-height: 38px;
  width: 100%;
  /* custom arrow */
  background-image:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24'><path fill='%23cbd3ea' d='M7 10l5 5 5-5z'/></svg>");
  background-repeat: no-repeat;
  background-position: right .6rem center;
  background-size: 18px 18px;
}
.select:focus,
select.select:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(124,58,237,.25);
}
.select:disabled { opacity: .6; cursor: not-allowed; }

/* Try to keep opened list readable on platforms that honor it */
select.select option {
  color: #0b0e13;              /* dropdown list text (system menu) */
}

/* 2) Custom dropdown menu — for places you want Notion-style popover
   Usage:
     <div class="dd">
       <button class="dd-btn">Current label</button>
       <div class="dd-menu">
         <button class="dd-item is-active">   // active = purple dot
           <span class="dd-dot"></span>Label
         </button>
         <button class="dd-item">
           <span class="dd-dot"></span>Another
         </button>
       </div>
     </div>
*/

.dd { position: relative; display: inline-block; }
.dd-btn{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.58rem .8rem; min-height:38px;
  border-radius:12px; font-weight:700; line-height:1;
  color:#f3f4f6; background: rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.14);
}
.dd-btn:focus{ outline:none; box-shadow: 0 0 0 2px rgba(124,58,237,.25); }

.dd-menu{
  position:absolute; right:0; top:calc(100% + 8px);
  min-width: 240px; z-index: 40;
  background: var(--bg-elev, #0f131a);
  border:1px solid var(--border, rgba(255,255,255,.08));
  border-radius:14px; box-shadow: var(--shadow-1, 0 14px 40px -18px rgba(15,18,24,.65));
  padding:.4rem;
}
.dd-item{
  display:flex; align-items:center; gap:.6rem;
  width:100%; text-align:left;
  padding:.55rem .65rem; border-radius:10px;
  color:#e8eaf2; border:1px solid transparent;
  background: transparent; cursor:pointer;
}
.dd-item:hover{ background: rgba(255,255,255,.06); }
.dd-item.is-active{ background: rgba(124,58,237,.12); border-color: rgba(124,58,237,.30); }

/* Purple selection dot */
.dd-dot{
  width:10px; height:10px; border-radius:999px; flex:0 0 10px;
  background: transparent; border:2px solid rgba(124,58,237,.8);
  box-shadow:none;
}
.dd-item.is-active .dd-dot{
  background:#7c3aed; border-color:#7c3aed;
  box-shadow: 0 0 0 4px rgba(124,58,237,.20);
}

/* Optional: full-width variant for header bars */
.dd-btn.wide { width: 100%; justify-content: space-between; }

/* Ensure dropdowns never clip inside bars/cards */
.essay-ws .editor-topbar,
.essay-ws .editor-actions,
.dd-menu { overflow: visible; }

/* === Force dark selects globally (closed control only) === */
:root{
  --select-bg: rgba(255,255,255,.05);
  --select-br: rgba(255,255,255,.14);
  --select-fg: #f3f4f6;
  --select-focus: rgba(124,58,237,.25);
}

select, .select, select.select {
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  appearance: none !important;
  background: var(--select-bg) !important;
  border: 1px solid var(--select-br) !important;
  color: var(--select-fg) !important;
  border-radius: 12px !important;
  padding: .58rem 2.1rem .58rem .8rem !important;
  min-height: 38px !important;
  line-height: 1 !important;
  font-weight: 600 !important;
  background-image:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24'><path fill='%23cbd3ea' d='M7 10l5 5 5-5z'/></svg>") !important;
  background-repeat: no-repeat !important;
  background-position: right .6rem center !important;
  background-size: 18px 18px !important;
}
select:focus, .select:focus { outline: none !important; box-shadow: 0 0 0 2px var(--select-focus) !important; }
select:disabled, .select:disabled { opacity: .6 !important; cursor: not-allowed !important; }
select::-ms-expand { display: none; } /* old IE arrow */

/* Attempt to darken option list where supported (not all browsers honor this) */
select.select option { color:#e8eaf2; background:#0f131a; }

/* === Custom Notion-like dropdown (purple selection dot) === */
.ms{ position:relative; display:inline-block; }
.ms-btn{
  display:inline-flex; align-items:center; justify-content:space-between; gap:.5rem;
  padding:.58rem .8rem; min-height:38px; border-radius:12px; font-weight:700; line-height:1;
  color:#f3f4f6; background: var(--select-bg); border:1px solid var(--select-br); width:100%;
}
.ms-btn:focus{ outline:none; box-shadow: 0 0 0 2px var(--select-focus); }
.ms-menu{
  position:absolute; right:0; top:100%; min-width: 220px; z-index: 50;
  background: var(--bg-elev, #0f131a);
  border:1px solid var(--border, rgba(255,255,255,.08));
  border-radius:14px; box-shadow: var(--shadow-1, 0 14px 40px -18px rgba(15,18,24,.65));
  padding:.4rem;
}
.ms-item{
  display:flex; align-items:center; gap:.6rem; width:100%; text-align:left;
  padding:.55rem .65rem; border-radius:10px; color:#e8eaf2; border:1px solid transparent; background: transparent;
}
.ms-item:hover{ background: rgba(255,255,255,.06); }
.ms-item.is-active{ background: rgba(124,58,237,.12); border-color: rgba(124,58,237,.30); }
.ms-dot{
  width:10px; height:10px; border-radius:999px; flex:0 0 10px;
  background: transparent; border:2px solid rgba(124,58,237,.8);
}
.ms-item.is-active .ms-dot{
  background:#7c3aed; border-color:#7c3aed; box-shadow: 0 0 0 4px rgba(124,58,237,.20);
}
.ms-right{ margin-left:auto; color:#9fb0d8; }

@layer components {
  /* Capsule field wrapper used for Status and Due date */
  .field { @apply inline-flex items-center gap-2 rounded-2xl h-10 px-3 border border-white/10 bg-[#1a1f2b]/60 backdrop-blur; }
  .field-label { @apply text-xs text-slate-400; }

  /* Date input to match custom select height/feel */
  .date-input { @apply bg-transparent outline-none text-slate-200 placeholder:text-slate-500 h-8; }
  .date-input::-webkit-calendar-picker-indicator { filter: invert(80%); opacity: .8; }

  /* === MenuSelect look & feel === */
  .ms { @apply relative inline-block w-full; }
  .ms-btn { @apply inline-flex items-center justify-between gap-2 w-full h-8 px-2.5 rounded-xl border border-white/10 bg-[#141927]/70 text-sm text-slate-200 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-violet-500/40; }
  .ms-menu { @apply absolute z-50 rounded-xl border border-white/10 bg-[#0f1320]/95 backdrop-blur p-1 shadow-xl; }
  .ms-item { @apply w-full text-left flex items-center gap-2 rounded-lg px-2 py-2 text-sm text-slate-200 hover:bg-white/5; }
  .ms-item.is-active .ms-dot { @apply bg-gradient-to-r from-indigo-400 to-violet-500; }
  .ms-dot { @apply inline-block w-2 h-2 rounded-full border border-white/20; }
  .ms-right { @apply ml-auto text-xs text-slate-400; }
}


@layer components {
  /* Make Status dropdown NOT pill-shaped */
  .ms.ms-flat .ms-btn {
    @apply h-9 px-3 rounded-lg border border-white/10 bg-transparent text-sm;
  }
  .ms.ms-flat .ms-menu { @apply rounded-lg; }
}

/* compact input variant for inline fields like Due date */
@layer components {
  .input--inline {
    width: auto !important;
    min-width: 0 !important;
  }
}


@layer components {
  /* Calendar inside the ms-menu */
  .cal { @apply p-2; }

  .cal-head { @apply flex items-center justify-between px-1 py-1; }
  .cal-title { @apply text-sm font-medium text-slate-200; }
  .cal-nav { @apply h-7 w-7 grid place-items-center rounded-lg text-slate-300 hover:bg-white/5; }

  .cal-dow-grid { @apply grid grid-cols-7 gap-1 px-1 pt-1; }
  .cal-dow { @apply text-[11px] text-center text-slate-400; }

  .cal-grid { @apply grid grid-cols-7 gap-1 p-1; }
  .cal-day {
    @apply h-8 w-8 md:h-9 md:w-9 rounded-lg text-sm text-slate-200
           hover:bg-white/5 grid place-items-center;
  }
  .cal-day.is-empty { @apply opacity-30 pointer-events-none; }
  .cal-day.is-today { @apply border border-white/15; }
  .cal-day.is-selected {
    @apply bg-gradient-to-r from-indigo-500/30 to-violet-500/30 border border-violet-500/40;
  }

  .cal-foot { @apply flex items-center justify-between px-1 py-1; }
  .cal-today { @apply text-xs text-indigo-300 hover:text-indigo-200; }
  .cal-clear { @apply text-xs text-slate-400 hover:text-slate-200; }
}

@layer components {
  /* Let the button and the SVG render beyond tight boxes if needed */
  .ms { overflow: visible; }
  .ms-btn { overflow: visible; }

  /* Prevent baseline cropping + give icon breathing room inside its own viewport */
  .ms-btn svg {
    display: block;         /* no baseline trimming */
    flex: none;             /* don't shrink */
    overflow: visible;      /* allow drawing outside glyph bounds */
    width: 16px;
    height: 16px;
    transform: scale(0.92); /* shrink a hair so right edge doesn't touch the viewport */
    transform-origin: center;
  }
}


@layer components {
  .ms-icon {
    display: block;
    flex: none;
    overflow: visible;
    width: 16px;
    height: 16px;
    transform: scale(0.92);
    transform-origin: center;
  }
}

/* =========================
   AI Processing Overlay
   ========================= */
.ai-overlay{
  position: fixed; inset: 0; z-index: 1000;
  display: grid; place-items: center;
  background:
    radial-gradient(1200px 700px at 15% 0%, rgba(124,58,237,.10), transparent 60%),
    radial-gradient(1000px 650px at 85% 15%, rgba(37,99,235,.10), transparent 60%),
    rgba(5,7,12,.45);
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
}
.ai-panel{
  display: grid; gap: .7rem; align-items: center; justify-items: center;
  padding: 18px 22px; border-radius: 16px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border: 1px solid var(--border);
  box-shadow: var(--shadow-1);
}
.ai-loader{ display:inline-flex; align-items:flex-end; gap:8px; }
.ai-loader span{
  width: 9px; height: 9px; border-radius: 999px;
  background: linear-gradient(90deg, #7c3aed, #2563eb);
  box-shadow: 0 0 0 4px rgba(124,58,237,.16);
  animation: ai-bounce 1s var(--ease) infinite;
}
.ai-loader span:nth-child(2){ animation-delay: .15s; }
.ai-loader span:nth-child(3){ animation-delay: .30s; }
@keyframes ai-bounce{
  0%,80%,100% { transform: translateY(0) scale(1); opacity:.85; }
  40%        { transform: translateY(-8px) scale(1.06); opacity:1; }
}
.ai-text{ font-weight: 700; color:#dbe0ff; letter-spacing:.2px; }

/* Subtle glow pulse for the merit badge orb */
@keyframes orbPulse {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 3px rgba(34,197,94,.18), 0 0 12px 3px rgba(34,197,94,.28);
  }
  45% {
    transform: scale(1.18);
    box-shadow: 0 0 0 5px rgba(34,197,94,.12), 0 0 18px 6px rgba(34,197,94,.36);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 3px rgba(34,197,94,.18), 0 0 12px 3px rgba(34,197,94,.28);
  }
}

/* =========================
   Landing Media & Graphics
   ========================= */
.media-grid{ display:grid; grid-template-columns: 1fr; gap: 1rem; }
@media (min-width: 1024px){ .media-grid{ grid-template-columns: repeat(3, 1fr); gap: 1.1rem; } }
.media-img{ display:block; width:100%; height:auto; object-fit:cover; object-position: center 40%; max-height: 320px; border-radius: 14px; border:1px solid var(--border); box-shadow: var(--shadow-2); }
.shine{ animation: imgFloat 7s var(--ease) infinite; }
@keyframes imgFloat{ 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-6px) } }

/* Inline highlight fallback (matches editor tones closely) */
.hl{ position:relative; border-radius:4px; padding: 0 .06em; }
.hl:not(.hl-good):not(.hl-meh){ background: rgba(124,58,237,.20); outline: 1px solid rgba(124,58,237,.35); }
.hl.hl-good{ background: rgba(52, 211, 153, .22); outline: 1px solid rgba(52,211,153,.35); }
.hl.hl-meh{  background: rgba(250, 204, 21, .22);  outline: 1px solid rgba(250,204,21,.35); }

/* Graphic card (animated gradient aura) */
.card-graphic{ position:relative; overflow:hidden; }
.card-graphic::before{
  content:""; position:absolute; inset:-40%; z-index:0;
  background: conic-gradient(from 0deg, rgba(124,58,237,.12), rgba(37,99,235,.12), rgba(124,58,237,.12));
  filter: blur(24px); opacity:.6; animation: spinAura 18s linear infinite;
}
.card-graphic::after{
  content:""; position:absolute; inset:0; z-index:1; pointer-events:none;
  background: radial-gradient(600px 220px at 50% -40px, rgba(124,58,237,.22), transparent 60%);
}
@keyframes spinAura{ to{ transform: rotate(360deg); } }
.card-graphic > *{ position: relative; z-index:2; }
.graphic-top{ display:grid; place-items:center; padding: .5rem 0 1rem; }
.graphic-meta{ display:flex; flex-wrap:wrap; gap:.5rem; }
.chip{
  display:inline-flex; align-items:center; gap:.35rem;
  padding:.4rem .6rem; border-radius:9999px; font-weight:700; font-size:.75rem;
  border:1px solid rgba(255,255,255,.14); background: rgba(255,255,255,.05); color:#e8eaf2;
}
.chip-good{ border-color: rgba(52,211,153,.35); background: rgba(52,211,153,.12); color:#d1fae5; }
.chip-meh{  border-color: rgba(250,204,21,.35); background: rgba(250,204,21,.12); color:#fde68a; }

/* Gauge visuals */
.gauge-wrap{ position:relative; display:grid; place-items:center; }
.gauge-wrap svg{ display:block; }
.gauge-label{ margin-top: -10px; text-align:center; }
.inline-score{ display:inline-flex; align-items:baseline; }
.gauge-num{ font-size:1.8rem; font-weight:800; color:#fff; }
.gauge-denom{ font-size:.9rem; color:#cbd3ea; }

/* Feature connectors */
section#features .container > .grid{ position: relative; }
section#features .container > .grid::before{
  content:""; position:absolute; left:6%; right:6%; top:-8px; height:2px;
  background: linear-gradient(90deg, rgba(124,58,237,.55), rgba(37,99,235,.55));
  opacity:.6; border-radius:9999px;
}

/* =========================
   Flow Connectors (HOW section)
   ========================= */
.flow-wrap{ position: relative; }
.flow-grid{ position: relative; z-index: 2; }
.flow-svg{
  position:absolute; left:0; right:0; top:-10px; height:260px; width:100%;
  pointer-events:none; z-index:1; opacity:.95;
}
.flow-path{ fill:none; stroke: url(#flowGrad); stroke-width: 3.2; stroke-linecap: round; stroke-dasharray: 8 12; animation: flowMove 8s linear infinite; }
@keyframes flowMove{ to{ stroke-dashoffset: -200; } }
.flow-dots{ position: absolute; inset:0; pointer-events:none; z-index: 2; }
.flow-dots .dot{
  position:absolute; width:10px; height:10px; border-radius:9999px;
  background: radial-gradient(circle, #7c3aed, #2563eb);
  box-shadow: 0 0 0 4px rgba(124,58,237,.18), 0 0 18px 6px rgba(37,99,235,.35);
  animation: orbPulse 2.8s var(--ease) infinite;
}
.flow-dots .dot:nth-child(2){ animation-delay: .25s; }
.flow-dots .dot:nth-child(3){ animation-delay: .5s; }

/* Intertwined creative orbs inside testimonials */
.creative-wrap{ position: relative; }
.creative-grid{ position: relative; z-index: 2; }
.creative-wrap .stars{ position:absolute; inset:-20px 0 -40px 0; z-index:0; pointer-events:none; }
.creative-wrap .stars i{
  position:absolute; width:3px; height:3px; border-radius:9999px; background:#e5e7ff; opacity:.7;
  box-shadow: 0 0 10px 2px rgba(124,58,237,.25);
  animation: twinkle 3.2s ease-in-out infinite;
}
@keyframes twinkle{ 0%,100%{ opacity:.25; transform: scale(.9) } 50%{ opacity:.95; transform: scale(1.15) } }
/* place 14 stars */
.creative-wrap .stars i:nth-child(1){ left:6%;  top:12%; animation-delay:.1s }
.creative-wrap .stars i:nth-child(2){ left:18%; top:36%; animation-delay:.4s }
.creative-wrap .stars i:nth-child(3){ left:28%; top:18%; animation-delay:.8s }
.creative-wrap .stars i:nth-child(4){ left:36%; top:58%; animation-delay:1.1s }
.creative-wrap .stars i:nth-child(5){ left:44%; top:28%; animation-delay:1.4s }
.creative-wrap .stars i:nth-child(6){ left:52%; top:42%; animation-delay:1.7s }
.creative-wrap .stars i:nth-child(7){ left:60%; top:16%; animation-delay:2s }
.creative-wrap .stars i:nth-child(8){ left:68%; top:54%; animation-delay:2.3s }
.creative-wrap .stars i:nth-child(9){ left:74%; top:24%; animation-delay:2.6s }
.creative-wrap .stars i:nth-child(10){ left:82%; top:46%; animation-delay:2.9s }
.creative-wrap .stars i:nth-child(11){ left:88%; top:18%; animation-delay:3.2s }
.creative-wrap .stars i:nth-child(12){ left:12%; top:64%; animation-delay:3.5s }
.creative-wrap .stars i:nth-child(13){ left:32%; top:72%; animation-delay:3.8s }
.creative-wrap .stars i:nth-child(14){ left:78%; top:70%; animation-delay:4.1s }
.creative-orbs{ position: absolute; inset: -40px -10px -60px -10px; z-index: 1; pointer-events: none; }
.creative-orbs .orb{ position:absolute; border-radius:9999px; filter: blur(28px); mix-blend-mode: screen; opacity:.7; animation: creativeDrift 14s ease-in-out infinite; }
.creative-orbs .orb-a{ width:180px; height:180px; left:-60px; top:-10px; background: radial-gradient(circle at 35% 35%, rgba(124,58,237,.55), rgba(37,99,235,.25) 60%, transparent 72%); }
.creative-orbs .orb-b{ width:220px; height:220px; left:calc(50% - 110px); top:90px; background: radial-gradient(circle at 50% 45%, rgba(37,99,235,.55), rgba(124,58,237,.25) 60%, transparent 70%); animation-delay:.3s; }
.creative-orbs .orb-c{ width:180px; height:180px; right:-60px; bottom:-30px; background: radial-gradient(circle at 60% 60%, rgba(124,58,237,.45), rgba(37,99,235,.22) 60%, transparent 72%); animation-delay:.6s; }
@keyframes creativeDrift{ 0%,100%{ transform: translate(0,0) } 50%{ transform: translate(6px,-10px) } }

/* (removed decorative orbs in favor of moving flow-dots) */

/* =========================
   Get Started ribbons & sparks
   ========================= */
#get-started .getstart-wrap{ position:relative; overflow:hidden; border-radius: 16px; border:1px solid var(--border); }
#get-started .getstart-bg{ position:absolute; inset:0; z-index:0; pointer-events:none; display:none; }
#get-started .cta-stars{ position:absolute; inset:0; z-index:0; pointer-events:none; }
#get-started .cta-stars i{
  position:absolute; width:3px; height:3px; border-radius:9999px; background:#e5e7ff; opacity:.8;
  box-shadow: 0 0 10px 2px rgba(124,58,237,.25);
  animation: twinkle 3.2s ease-in-out infinite;
}
/* positions around edges to avoid center text */
#get-started .cta-stars i:nth-child(1){ left:6%;  top:16%; animation-delay:.1s }
#get-started .cta-stars i:nth-child(2){ left:12%; top:78%; animation-delay:.3s }
#get-started .cta-stars i:nth-child(3){ left:20%; top:20%; animation-delay:.5s }
#get-started .cta-stars i:nth-child(4){ left:28%; top:82%; animation-delay:.7s }
#get-started .cta-stars i:nth-child(5){ left:36%; top:18%; animation-delay:.9s }
#get-started .cta-stars i:nth-child(6){ left:44%; top:80%; animation-delay:1.1s }
#get-started .cta-stars i:nth-child(7){ left:62%; top:18%; animation-delay:1.3s }
#get-started .cta-stars i:nth-child(8){ left:72%; top:80%; animation-delay:1.5s }
#get-started .cta-stars i:nth-child(9){ left:80%; top:20%; animation-delay:1.7s }
#get-started .cta-stars i:nth-child(10){ left:88%; top:78%; animation-delay:1.9s }
#get-started .cta-stars i:nth-child(11){ left:16%; top:86%; animation-delay:2.1s }
#get-started .cta-stars i:nth-child(12){ left:30%; top:86%; animation-delay:2.3s }
#get-started .cta-stars i:nth-child(13){ left:54%; top:86%; animation-delay:2.5s }
#get-started .cta-stars i:nth-child(14){ left:68%; top:86%; animation-delay:2.7s }
#get-started .cta-stars i:nth-child(15){ left:84%; top:86%; animation-delay:2.9s }
#get-started .cta-stars i:nth-child(16){ left:92%; top:86%; animation-delay:3.1s }
#get-started .getstart-content{ position:relative; z-index:1; padding: 20px 24px; background: transparent; backdrop-filter: blur(2px); border-radius:16px; border:1px solid var(--border); display:flex; flex-direction:column; gap:.7rem; align-items:center; text-align:center; }
#get-started .pitch{ font-size: 1.05rem; font-weight: 700; color:#e8eaf2; letter-spacing:.2px; white-space: normal; }
#get-started .actions{ display:flex; gap:.6rem; flex-wrap: wrap; justify-content: center; }
@media (min-width: 768px){
  #get-started .getstart-content{ flex-direction: row; justify-content: space-between; text-align: left; }
  #get-started .pitch{ white-space: nowrap; }
}

/* Header mobile safety: prevent child overflow from causing horizontal scroll */
.navbar .container { min-width: 0; overflow: hidden; }
.navbar .container > * { min-width: 0; }

/* Reuse drifting ribbons behind the testimonials containers */
.creative-wrap .ribbons{ display:none; }
.creative-wrap .creative-orbs{ display:none; }

/* Subtle animated underline for testimonials (purple/cyan/blue) */
.anim-subtle{ position: relative; }
.anim-subtle::after{
  content:""; position:absolute; left:14px; right:14px; bottom:-2px; height:2px; border-radius:9999px;
  background: linear-gradient(90deg, #7c3aed, #22d3ee, #2563eb);
  background-size: 200% 100%; opacity:.7;
  animation: subtleSlide 12s linear infinite;
}
@keyframes subtleSlide{ from{ background-position: 0% 0 } to{ background-position: 100% 0 } }

/* optional: pretty scrollbars */
.custom-scroll, .card-body .overflow-y-auto {
  scrollbar-width: thin;
}
.custom-scroll::-webkit-scrollbar,
.card-body .overflow-y-auto::-webkit-scrollbar { height: 10px; width: 10px; }
.custom-scroll::-webkit-scrollbar-thumb,
.card-body .overflow-y-auto::-webkit-scrollbar-thumb { background: rgba(255,255,255,.12); border-radius: 999px; }
.custom-scroll::-webkit-scrollbar-track,
.card-body .overflow-y-auto::-webkit-scrollbar-track { background: transparent; }
